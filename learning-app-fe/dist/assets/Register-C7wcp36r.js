import{r as o,u as S,U as A,j as e,L as r,i as j,a as T}from"./index-DOHiL2hy.js";import{u as E}from"./index.esm-DTng5uxP.js";const R=()=>{const[n,i]=o.useState(!1),[m,w]=o.useState(""),[h,d]=o.useState(!1),[u,p]=o.useState(!1),k=S(),{profile:f}=o.useContext(A);o.useEffect(()=>{f&&k("/learning")},[f]);const{register:l,handleSubmit:v,setFocus:x,formState:{errors:a,isSubmitting:y}}=E();o.useEffect(()=>{x("fullName")},[x]),o.useEffect(()=>{d(!1)},[m]);const C=async t=>{if(!t)return;if(m!==t.password){d("Xác nhận mật khẩu sai");return}const{fullName:P,email:b,password:g}=t;try{await j.post("register",{fullName:P,email:b,password:g}),await j.post("login",{email:b,password:g}).then(s=>{var c,N;T.set("token",(N=(c=s==null?void 0:s.data)==null?void 0:c.data)==null?void 0:N.accessToken,{expires:30}),s!=null&&s.data&&window.location.replace("/learning")})}catch(s){p(()=>s.response.data&&Array.isArray(s.response.data)?s.response.data.map(c=>c.message).join(`
`):s.response.data.message),setTimeout(()=>p(""),2e3)}};return e.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gradient-to-r from-pink-400 to-blue-600",children:e.jsxs("div",{className:"flex h-auto w-[35rem] flex-col bg-white p-6",children:[e.jsxs("form",{onSubmit:v(C),children:[e.jsx("h4",{className:"mb-4 w-full text-center text-3xl font-bold font-noto",children:"Tạo tài khoản"}),e.jsx("input",{name:"fullName",...l("fullName",{required:"Nhập tên tài khoản của bạn",validate:t=>t.match(/^[A-Za-zÀ-ÿáàảãạăắằẳẵặâấầẩẫậèéẻẽẹêếềểễệìíỉĩịòóỏõọôốồổỗộơớờở̃ỡợùúủũụưứừửữựỳýỷỹỵđĐ0-9]+(?: [A-Za-zÀ-ÿáàảãạăắằẳẵặâấầẩẫậèéẻẽẹêếềểễệìíỉĩịòóỏõọôốồổỗộơớờở̃ỡợùúủũụưứừửữựỳýỷỹỵđĐ0-9]+)*$/)?!0:"Tên không được phép có dấu cách đầu tiên và mỗi từ phải cách nhau bằng một dấu cách.",maxLength:{value:50,message:"Trường tên quá dài, vui lòng nhập lại"}}),type:"text",placeholder:"Họ và tên",className:"mb-[0.5rem] w-full border border-inherit p-2 pl-3 outline-none font-noto"}),e.jsx("br",{}),a.fullName&&e.jsx("p",{className:"mb-2 text-red-500",children:a.fullName.message}),e.jsx("input",{...l("email",{required:"Nhập email của bạn",validate:t=>t.match(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/)?!0:"Vui lòng nhập đúng email của bạn"}),type:"text",placeholder:"Email",className:"mb-[0.5rem] w-full border border-inherit p-2 pl-3 outline-none font-noto"}),e.jsx("br",{}),a.email&&e.jsx("p",{className:"mb-2 text-red-500",children:a.email.message}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...l("password",{required:"Nhập mật khẩu của bạn",minLength:{value:6,message:"Mật khẩu phải nhiều hơn 6 ký tự"},validate:t=>t.match(/^[A-Za-z0-9!@#$%^&*(),.?":{}|<>_-]+$/)?!0:"Vui lòng nhập mật khẩu của bạn"}),type:n?"text":"password",placeholder:"Mật khẩu",className:"mb-[0.5rem] w-full border border-inherit p-2 pl-3 outline-none font-noto"}),n?e.jsx("i",{className:"fa-solid fa-eye-slash absolute right-3 top-3 cursor-pointer",onClick:()=>i(!n)}):e.jsx("i",{className:"fa-solid fa-eye absolute right-3 top-3 cursor-pointer",onClick:()=>i(!n)}),e.jsx("br",{}),a.password&&e.jsx("p",{className:"mb-2 text-red-500 font-noto",children:a.password.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...l("rePassword",{required:"Xác nhận lại mật khẩu của bạn"}),onChange:t=>w(t.target.value),name:"rePassword",type:n?"text":"password",placeholder:"Xác nhận mật khẩu",className:"mb-[0.5rem] w-full border border-inherit p-2 pl-3 outline-none font-noto"}),n?e.jsx("i",{className:"fa-solid fa-eye-slash absolute right-3 top-3 cursor-pointer",onClick:()=>i(!n)}):e.jsx("i",{className:"fa-solid fa-eye absolute right-3 top-3 cursor-pointer",onClick:()=>i(!n)}),e.jsx("br",{}),a.rePassword&&e.jsx("p",{className:"mb-2 text-red-500 font-noto",children:a.rePassword.message}),h&&e.jsx("p",{className:"mb-2 text-red-500 font-noto",children:h})]}),e.jsx("button",{className:"h-16 w-full bg-gradient-to-r from-pink-400 to-blue-600 p-2 text-2xl font-bold text-white hover:text-black font-noto",children:y?"Đang Gửi...":"Đăng Ký"}),u&&e.jsx("p",{className:"mb-2 p-1 text-center text-red-500 font-noto",children:u})]}),e.jsxs("p",{className:"mt-2 font-noto",children:["Bạn đã có tài khoản?"," ",e.jsx(r,{to:"/login",className:"text-[1.1rem] font-bold font-noto text-blue-700",children:"Đăng nhập"})]}),e.jsxs("p",{className:"mt-3 font-noto",children:["Khi đăng ký trên Duylingo, bạn đã đồng ý với"," ",e.jsx(r,{to:"",className:"font-medium font-noto",children:"Các chính sách"}),"và",e.jsx(r,{to:"",className:"font-medium font-noto",children:"Chính sách bảo mật"}),"của chúng tôi."]}),e.jsxs("p",{className:"mt-3 font-noto",children:["Trang này được bảo vệ bởi tập đoàn"," ",e.jsx("span",{className:"font-medium font-noto",children:"reCAPTCHA"})," và theo"," ",e.jsx(r,{to:"",className:"font-medium font-noto",children:"Chính sách bảo mật"}),"và"," ",e.jsx(r,{to:"",className:"font-medium font-noto",children:"Điều khoản dịch vụ của Google"}),"."]})]})})};export{R as default};
